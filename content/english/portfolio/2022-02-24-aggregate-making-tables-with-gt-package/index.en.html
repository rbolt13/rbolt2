---
title: 'Portland R User Group: Aggregate making tables with gt package'
author: Randi Bolt
date: '2022-02-24'
slug: []
categories:
  - undergrad
tags:
  - rstudio
---

<script src="{{< blogdown/postref >}}index.en_files/header-attrs/header-attrs.js"></script>


<p>Ted Landeras led this event for <a href="https://pdxrlang.com/">Portland R user Grou</a>p where we watched <a href="https://www.youtube.com/watch?v=z0UGmMOxl-c">Tich Lannone|| Making Beautiful Tables with <code>{gt}</code>|| RStudio</a> as a group on Youtube, and then went through some other examples.</p>
<pre class="r"><code>library(gt)</code></pre>
<pre><code>## Warning: package &#39;gt&#39; was built under R version 4.0.5</code></pre>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
<pre><code>## ✓ ggplot2 3.3.5     ✓ purrr   0.3.4
## ✓ tibble  3.1.6     ✓ dplyr   1.0.8
## ✓ tidyr   1.1.4     ✓ stringr 1.4.0
## ✓ readr   2.0.2     ✓ forcats 0.5.1</code></pre>
<pre><code>## Warning: package &#39;dplyr&#39; was built under R version 4.0.5</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(palmerpenguins)</code></pre>
<p>use markdown with <code>md()</code></p>
<p>pixel size <code>px()</code></p>
<pre class="r"><code>penguins %&gt;%
  group_by(species) %&gt;%
  summarize_at(
    .vars = c(
      &quot;bill_length_mm&quot;, 
      &quot;bill_depth_mm&quot;,
      &quot;flipper_length_mm&quot;,
      &quot;body_mass_g&quot;
      ),
            .funs = ~ mean(.,na.rm = TRUE)) %&gt;%
  gt() %&gt;%
  tab_header(
    title = md(&quot;The penguins dataset&quot;),
    subtitle = md(&quot;**Three** years of data on penguins on _three_ islands.&quot;)
  ) %&gt;%
  cols_label(
    bill_length_mm = md(&quot;Bill Length,&lt;br&gt;mm&quot;),
    bill_depth_mm = md(&quot;Bill Depth,&lt;br&gt;mm&quot;),
    flipper_length_mm = md(&quot;Flipper Length,&lt;br&gt;mm&quot;),
    body_mass_g = md(&quot;Body Mass,&lt;br&gt;g&quot;)
  ) %&gt;%
  opt_align_table_header(align = &quot;left&quot;) %&gt;% 
#   fmt_number(columns = everything()) %&gt;%
#   fmt_number(columns = body_mass_g, scale_by = 1/1000) %&gt;%
  cols_width(
    bill_length_mm ~ px(120),
    bill_depth_mm ~ px(120),
    flipper_length_mm ~ px(120),
    body_mass_g ~ px(120),
    everything() ~ px(100)
  ) %&gt;% 
  tab_source_note(source_note = md(&quot;Dataset is from the `palmerpenguins` **R** package.&quot;)
                  ) %&gt;%
  # tab_footnote(
  #   footnote = &quot;The Largest of the three penguins studied.&quot;,
  #   locations = cells_stub(rows = &quot;Gentoo&quot;)
  # )
  tab_footnote(
    footnote = &quot;Flipper Length was measured with a tape measure.&quot;,
    locations = cells_column_labels(columns = flipper_length_mm)
  ) %&gt;%
  tab_footnote(
    footnote = &quot;Tap measure suffered some frost damage.&quot;,
    locations = list(
      cells_column_labels(columns = flipper_length_mm),
      cells_body(columns = flipper_length_mm)
  )
  ) %&gt;%
  tab_style(
    locations = cells_body(
      columns = everything()
      ),
    style = list(
      cell_fill(color = &quot;steelblue&quot;),
      cell_text(color = &quot;white&quot;)
      )
  ) %&gt;%
  tab_stubhead(label = md(&quot;Penguin *Species*&quot;))</code></pre>
<div id="feinczlwat" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#feinczlwat .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#feinczlwat .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#feinczlwat .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#feinczlwat .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#feinczlwat .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#feinczlwat .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#feinczlwat .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#feinczlwat .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#feinczlwat .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#feinczlwat .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#feinczlwat .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#feinczlwat .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#feinczlwat .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#feinczlwat .gt_from_md > :first-child {
  margin-top: 0;
}

#feinczlwat .gt_from_md > :last-child {
  margin-bottom: 0;
}

#feinczlwat .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#feinczlwat .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#feinczlwat .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#feinczlwat .gt_row_group_first td {
  border-top-width: 2px;
}

#feinczlwat .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#feinczlwat .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#feinczlwat .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#feinczlwat .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#feinczlwat .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#feinczlwat .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#feinczlwat .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#feinczlwat .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#feinczlwat .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#feinczlwat .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#feinczlwat .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#feinczlwat .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#feinczlwat .gt_left {
  text-align: left;
}

#feinczlwat .gt_center {
  text-align: center;
}

#feinczlwat .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#feinczlwat .gt_font_normal {
  font-weight: normal;
}

#feinczlwat .gt_font_bold {
  font-weight: bold;
}

#feinczlwat .gt_font_italic {
  font-style: italic;
}

#feinczlwat .gt_super {
  font-size: 65%;
}

#feinczlwat .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#feinczlwat .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#feinczlwat .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#feinczlwat .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#feinczlwat .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table" style="table-layout: fixed;; width: 0px">
  <colgroup>
    <col style="width:100px;"/>
    <col style="width:120px;"/>
    <col style="width:120px;"/>
    <col style="width:120px;"/>
    <col style="width:120px;"/>
  </colgroup>
  <thead class="gt_header">
    <tr>
      <th colspan="5" class="gt_heading gt_title gt_font_normal" style>The penguins dataset</th>
    </tr>
    <tr>
      <th colspan="5" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style><strong>Three</strong> years of data on penguins on <em>three</em> islands.</th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">species</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">Bill Length,<br>mm</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">Bill Depth,<br>mm</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">Flipper Length,<br>mm<sup class="gt_footnote_marks">1,2</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">Body Mass,<br>g</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_center" style="background-color: #4682B4; color: #FFFFFF;">Adelie</td>
<td class="gt_row gt_right" style="background-color: #4682B4; color: #FFFFFF;">38.79139</td>
<td class="gt_row gt_right" style="background-color: #4682B4; color: #FFFFFF;">18.34636</td>
<td class="gt_row gt_right" style="background-color: #4682B4; color: #FFFFFF;">189.9536<sup class="gt_footnote_marks">2</sup></td>
<td class="gt_row gt_right" style="background-color: #4682B4; color: #FFFFFF;">3700.662</td></tr>
    <tr><td class="gt_row gt_center" style="background-color: #4682B4; color: #FFFFFF;">Chinstrap</td>
<td class="gt_row gt_right" style="background-color: #4682B4; color: #FFFFFF;">48.83382</td>
<td class="gt_row gt_right" style="background-color: #4682B4; color: #FFFFFF;">18.42059</td>
<td class="gt_row gt_right" style="background-color: #4682B4; color: #FFFFFF;">195.8235<sup class="gt_footnote_marks">2</sup></td>
<td class="gt_row gt_right" style="background-color: #4682B4; color: #FFFFFF;">3733.088</td></tr>
    <tr><td class="gt_row gt_center" style="background-color: #4682B4; color: #FFFFFF;">Gentoo</td>
<td class="gt_row gt_right" style="background-color: #4682B4; color: #FFFFFF;">47.50488</td>
<td class="gt_row gt_right" style="background-color: #4682B4; color: #FFFFFF;">14.98211</td>
<td class="gt_row gt_right" style="background-color: #4682B4; color: #FFFFFF;">217.1870<sup class="gt_footnote_marks">2</sup></td>
<td class="gt_row gt_right" style="background-color: #4682B4; color: #FFFFFF;">5076.016</td></tr>
  </tbody>
  <tfoot class="gt_sourcenotes">
    <tr>
      <td class="gt_sourcenote" colspan="5">Dataset is from the <code>palmerpenguins</code> <strong>R</strong> package.</td>
    </tr>
  </tfoot>
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="5"><sup class="gt_footnote_marks">1</sup> Flipper Length was measured with a tape measure.</td>
    </tr>
    <tr>
      <td class="gt_footnote" colspan="5"><sup class="gt_footnote_marks">2</sup> Tap measure suffered some frost damage.</td>
    </tr>
  </tfoot>
</table>
</div>
<div id="practice" class="section level1">
<h1>Practice</h1>
</div>
<div id="what-can-gt-do-for-you" class="section level1">
<h1>What can {gt} do for you?</h1>
<p>The following are taken from a number of different examples. Where possible, I’ve tried to notate the source.</p>
<div id="gt-parts-reference" class="section level2">
<h2>{gt} parts reference</h2>
<pre class="r"><code>url &lt;- &quot;gt_parts_of_a_table.svg&quot;
knitr::include_graphics(url)</code></pre>
<p><img src="gt_parts_of_a_table.svg" /><!-- --></p>
</div>
</div>
